git init
git add .
git commit -m "Initial PHP-FPM + Nginx setup"
git branch -M main
git remote add origin https://github.com/Doogmann/webapp.git
git push -u origin main




cat > docker-compose.registry.yml <<'YAML'
version: "3.9"
services:
  php:
    image: dogman11/webapp-php:latest
  nginx:
    image: dogman11/webapp-nginx:latest
    depends_on:
      - php
    ports:
      - "8080:80"
YAML

docker compose -f docker-compose.registry.yml up










# Bygg om if needed
docker build -f php.Dockerfile   -t webapp-php:latest .
docker build -f nginx.Dockerfile -t webapp-nginx:latest .

# Tagga till rÃ¤tt Docker Hub-namespace (byt vid behov)
docker tag webapp-php:latest    dogman11/webapp-php:latest
docker tag webapp-nginx:latest  dogman11/webapp-nginx:latest

# Logga in och pusha
docker login
docker push dogman11/webapp-php:latest
docker push dogman11/webapp-nginx:latest



# Bas
AZ_SUBSCRIPTION="9bbad496-1ab4-48d5-9841-37d98a511320"
AZ_LOCATION="northeurope"
AZ_RG="rg-webapp-docker"
AZ_PLAN="asp-webapp-docker"
AZ_APP="webapp-docker-$(openssl rand -hex 3)"   # unikt namn (hostnamn)




az account set --subscription "$AZ_SUBSCRIPTION"

# Resource Group
az group create -n "$AZ_RG" -l "$AZ_LOCATION"

# App Service Plan (Linux)
az appservice plan create -g "$AZ_RG" -n "$AZ_PLAN" --is-linux --sku B1

# Web App (multicontainer)
az webapp create -g "$AZ_RG" -p "$AZ_PLAN" -n "$AZ_APP" --multicontainer-config-type compose --multicontainer-config-file docker-compose.registry.yml


webapp-docker-b74fa7.azurewebsites.net





az webapp config container set \
  -g rg-webapp-docker -n webapp-docker-b74fa7 \
  --multicontainer-config-type compose \
  --multicontainer-config-file docker-compose.registry.yml

az webapp restart -g rg-webapp-docker -n webapp-docker-b74fa7



